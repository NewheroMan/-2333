(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{484:function(t,e,n){var content=n(612);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(23).default)("3f53c0b8",content,!0,{sourceMap:!1})},485:function(t,e,n){var content=n(614);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(23).default)("56f4c986",content,!0,{sourceMap:!1})},611:function(t,e,n){"use strict";var c=n(484);n.n(c).a},612:function(t,e,n){(t.exports=n(22)(!1)).push([t.i,".cmt-info img[data-v-4d41b2ca]{width:16px;height:16px}.cmt-info span[data-v-4d41b2ca]{float:right}.cmt-content p[data-v-4d41b2ca]{margin-top:10px}.cmt-content .cmt-pic[data-v-4d41b2ca]{width:80px;height:80px;border-radius:6px;border:1px dashed #ddd;padding:5px;margin-top:10px;margin-right:5px;overflow:hidden}.cmt-content .cmt-pic img[data-v-4d41b2ca]{width:100%;height:100%;cursor:pointer}.cmt-content .cmt-ctrl[data-v-4d41b2ca]{height:20px;line-height:20px;text-align:right;font-size:12px;color:#1e50a2}.cmt-content .cmt-ctrl a[data-v-4d41b2ca]{text-decoration:none;color:inherit}",""])},613:function(t,e,n){"use strict";var c=n(485);n.n(c).a},614:function(t,e,n){(t.exports=n(22)(!1)).push([t.i,".container[data-v-51dec3b2]{width:1000px;margin:20px auto 0}.left[data-v-51dec3b2]{width:700px}.left .post-content[data-v-51dec3b2]{width:700px;overflow:hidden}.left .post-content[data-v-51dec3b2] img{max-width:700px!important}.left h1[data-v-51dec3b2]{height:130px;padding:20px 0;border-bottom:1px solid #ccc}.left .post-info[data-v-51dec3b2]{margin:20px 0;text-align:right}.left .post-info span[data-v-51dec3b2]{margin-right:20px;color:#999}.post-ctrl[data-v-51dec3b2]{padding:50px 0}.post-ctrl .ctrl-item[data-v-51dec3b2]{margin:0 20px;width:60px;height:55px;text-align:center;cursor:pointer}.post-ctrl .ctrl-item i[data-v-51dec3b2]{font-size:28px;color:orange}.post-ctrl .ctrl-item p[data-v-51dec3b2]{font-size:14px;color:#999;margin-top:5px}.cmt-wrapper h4[data-v-51dec3b2]{margin-bottom:20px}.cmt-wrapper .cmt-input[data-v-51dec3b2]{margin-bottom:10px}.cmt-wrapper .cmt-input-ctrls[data-v-51dec3b2]{margin-bottom:30px}.cmt-wrapper .cmt-input-ctrls[data-v-51dec3b2] .el-upload--picture-card{width:100px;height:100px;line-height:100px}.cmt-wrapper .cmt-input-ctrls[data-v-51dec3b2] .el-upload-list__item{width:100px;height:100px}.right[data-v-51dec3b2]{width:280px}.right h4[data-v-51dec3b2]{padding-bottom:10px;border-bottom:1px solid #999}.right .recommend-list[data-v-51dec3b2]{padding:20px 0}.right .recommend-list .post-img[data-v-51dec3b2]{margin-right:10px;width:100px;height:80px}.right .recommend-list .post-img img[data-v-51dec3b2]{width:100%;height:100%}.right .recommend-list .post-text[data-v-51dec3b2]{font-size:12px;flex:1;position:relative}.right .recommend-list .post-text div[data-v-51dec3b2]{position:absolute;top:0;left:0}.right .recommend-list .post-text span[data-v-51dec3b2]{position:absolute;left:0;bottom:0}.cmt-list .cmt-item[data-v-51dec3b2]{padding:20px 20px 5px}.cmt-list .cmt-item .cmt-info img[data-v-51dec3b2]{width:16px;height:16px}.cmt-list .cmt-item .cmt-info span[data-v-51dec3b2]{float:right}.cmt-list .cmt-item .cmt-content p[data-v-51dec3b2]{margin-top:10px}.cmt-list .cmt-item .cmt-content .cmt-pic[data-v-51dec3b2]{width:80px;height:80px;border-radius:6px;border:1px dashed #ddd;padding:5px;margin-top:10px;margin-right:5px;overflow:hidden}.cmt-list .cmt-item .cmt-content .cmt-pic img[data-v-51dec3b2]{width:100%;height:100%;cursor:pointer}.cmt-list .cmt-item .cmt-content .cmt-ctrl[data-v-51dec3b2]{height:20px;line-height:20px;text-align:right;font-size:12px;color:#1e50a2}.cmt-list .cmt-item .cmt-content .cmt-ctrl a[data-v-51dec3b2]{text-decoration:none;color:inherit}",""])},630:function(t,e,n){"use strict";n.r(e);n(85),n(32),n(33),n(17),n(56);var c=n(54),r=n(34),o={name:"Item",props:["data"],methods:{handleChuanZhi:function(data){this.$emit("handleJieShou",data)},changeTime:function(t){return this.$moment(t).format("YYYY-MM-DD HH:mm")}}},d=(n(611),n(12)),l=Object(d.a)(o,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"cmd-floor"},[n("div",{staticClass:"cmt-info"},[n("img",{attrs:{src:"http://157.122.54.189:9095"+t.data.account.defaultAvatar}}),t._v(" "),n("em",{staticStyle:{"font-style":"normal"}},[t._v(t._s(t.data.account.nickname))]),t._v(" "),n("i",[t._v(t._s(t.changeTime(t.data.created_at)))]),t._v(" "),n("span",[t._v(t._s(t.data.level))])]),t._v(" "),n("div",{staticClass:"cmt-content"},[n("div",{staticClass:"cmt-new"},[n("p",{staticClass:"cmt-message"},[t._v(t._s(t.data.content))]),t._v(" "),t.data.pics.length>0?n("el-row",{attrs:{type:"flex"}},t._l(t.data.pics,function(t,e){return n("div",{key:e,staticClass:"cmt-pic"},[n("img",{attrs:{src:"http://157.122.54.189:9095"+t.url}})])}),0):t._e(),t._v(" "),n("div",{staticClass:"cmt-ctrl"},[n("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.handleChuanZhi(t.data)}}},[t._v("回复")])])],1)]),t._v(" "),n("div",[t.data.parent?n("Item",{attrs:{data:t.data.parent},on:{handleJieShou:t.handleChuanZhi}}):t._e()],1)])},[],!1,null,"4d41b2ca",null).exports;n(0);function m(object,t){var e=Object.keys(object);return Object.getOwnPropertySymbols&&e.push.apply(e,Object.getOwnPropertySymbols(object)),t&&(e=e.filter(function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable})),e}var h={components:{DetailCmt:l},data:function(){return{dufaem:!1,nickname:"",dataList:{account:{},city:{},id:""},textarea:"",tuiJianData:[],pics:[],limit:2,start:0,total:0,pageIndex:1,pinLunData:[],dialogVisible:!1,childrenList:{},huifuId:0}},methods:{handleJieShou:function(t){this.nickname=t.account.nickname,this.dufaem=!0,this.childrenList=function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?m(source,!0).forEach(function(e){Object(r.a)(t,e,source[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):m(source).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))})}return t}({},t)},getList:function(){var t=this;this.$axios({baseURL:"http://157.122.54.189:9095",url:"/posts",params:this.$route.query}).then(function(e){if(200===e.status){var data=Object(c.a)(e.data.data,1)[0];t.dataList=data}})},updateList:function(t){this.getList(),this.init()},changeTime:function(t){return this.$moment(t).format("YYYY-MM-DD HH:mm")},handleDianZan:function(t){var e=this;this.$axios({baseURL:"http://157.122.54.189:9095",url:"/posts/like",params:{id:t},headers:{Authorization:"Bearer ".concat(this.$store.state.user.userInfo.token)}}).then(function(t){200===t.status&&(e.$message({type:"success",message:"点赞成功"}),e.getList())})},handleClose:function(){this.dufaem=!1},handleDiGui:function(t){this.huifuId=t.id,this.dufaem=!0,this.nickname=t.account.nickname},init:function(){var t=this;this.$axios({baseURL:"http://157.122.54.189:9095",url:"/posts/comments",params:{post:this.$route.query.id,_limit:this.limit,_start:this.start}}).then(function(e){200===e.status&&(t.total=e.data.total,t.pinLunData=e.data.data)})},handlePinLun:function(){var t=this;this.$axios({baseURL:"http://157.122.54.189:9095",url:"/comments",method:"POST",data:{content:this.textarea,post:this.dataList.id,pics:this.pics,follow:this.childrenList.account?this.childrenList.account.id:this.huifuId},headers:{Authorization:"Bearer ".concat(this.$store.state.user.userInfo.token)}}).then(function(e){200===e.status&&(t.$message({type:"success",message:"评论成功"}),t.textarea="",t.$refs.clear.clearFiles(),t.init())})},handleBeforeUpload:function(t){if(-1===t.type.indexOf("image/"))return this.$message({type:"error",message:"格式错误"}),!1},handleSuccess:function(t){0!==!t.length&&this.pics.push(t[0])},handleRemove:function(t){var e=this;t.response[0]&&this.pics.forEach(function(n,i){n.id===t.response[0].id&&e.pics.splice(i,1)})},handleSizeChange:function(t){this.limit=t,this.pageIndex=1,this.init()},handleCurrentChange:function(t){this.pageIndex=t,this.start=(t-1)*this.limit,this.init()}},mounted:function(){var t=this;this.$axios({baseURL:"http://157.122.54.189:9095",url:"/posts/recommend",params:{id:this.$route.query.id}}).then(function(e){200===e.status&&(t.tuiJianData=e.data.data)}),this.getList(),this.init()}},v=(n(613),Object(d.a)(h,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-row",{staticClass:"container",attrs:{type:"flex",justify:"space-between"}},[n("div",{staticClass:"left"},[n("el-breadcrumb",{attrs:{separator:"/"}},[n("el-breadcrumb-item",{attrs:{to:{path:"/post"}}},[t._v("旅游攻略")]),t._v(" "),n("el-breadcrumb-item",[t._v("攻略详情")])],1),t._v(" "),n("h1",[t._v(t._s(t.dataList.title))]),t._v(" "),n("div",{staticClass:"post-info"},[n("span",[t._v("攻略："+t._s(t.$moment(t.dataList.created_at).format("YYYY-MM-DD HH:mm:ss")))]),t._v(" "),n("span",[t._v("阅读："+t._s(t.dataList.watch))])]),t._v(" "),n("div",{staticClass:"post-content",domProps:{innerHTML:t._s(t.dataList.content)}}),t._v(" "),n("div",{staticClass:"post-ctrl"},[n("el-row",{attrs:{type:"flex",justify:"center"}},[n("div",{staticClass:"ctrl-item"},[n("i",{staticClass:"iconfont iconpinglun"}),t._v(" "),n("p",[t._v("评论("+t._s(t.total)+")")])]),t._v(" "),n("div",{staticClass:"ctrl-item"},[n("i",{staticClass:"iconfont iconstar1"}),t._v(" "),n("p",[t._v("收藏")])]),t._v(" "),n("div",{staticClass:"ctrl-item"},[n("i",{staticClass:"iconfont iconfenxiang"}),t._v(" "),n("p",[t._v("分享")])]),t._v(" "),n("div",{staticClass:"ctrl-item",on:{click:function(e){return t.handleDianZan(t.dataList.id)}}},[n("i",{staticClass:"iconfont iconding"}),t._v(" "),n("p",[t._v("点赞("+t._s(t.dataList.like)+")")])])])],1),t._v(" "),n("div",{staticClass:"cmt-wrapper"},[n("h4",{staticClass:"cmt-title"},[t._v("评论")]),t._v(" "),t.dufaem?n("el-tag",{attrs:{closable:"","disable-transitions":!1},on:{close:function(e){return t.handleClose()}}},[t._v(t._s(t.nickname))]):t._e(),t._v(" "),n("div",{staticClass:"cmt-input"},[n("el-input",{attrs:{type:"textarea",placeholder:"说点什么把..."},model:{value:t.textarea,callback:function(e){t.textarea=e},expression:"textarea"}})],1),t._v(" "),n("el-row",{staticClass:"cmt-input-ctrls",attrs:{type:"flex",justify:"space-between"}},[n("div",{staticClass:"cmt-pics"},[n("el-upload",{ref:"clear",attrs:{action:"http://157.122.54.189:9095/upload","list-type":"picture-card","on-remove":t.handleRemove,"on-success":t.handleSuccess,"before-upload":t.handleBeforeUpload,name:"files"}},[n("i",{staticClass:"el-icon-plus"})]),t._v(" "),n("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[n("img",{attrs:{width:"100%",src:t.pics}})])],1),t._v(" "),n("div",[n("el-button",{attrs:{type:"primary"},on:{click:t.handlePinLun}},[t._v("提交")])],1)]),t._v(" "),n("div",{staticClass:"cmt-list"},t._l(t.pinLunData,function(e,c){return n("div",{key:c,staticClass:"cmt-item",staticStyle:{padding:"10px",border:"1px dashed #ccc"}},[n("div",{staticClass:"cmt-info"},[n("img",{attrs:{src:"http://157.122.54.189:9095"+e.account.defaultAvatar}}),t._v(" "),n("em",{staticStyle:{"font-style":"normal"}},[t._v(t._s(e.account.nickname))]),t._v(" "),n("i",[t._v(t._s(t.changeTime(e.created_at)))]),t._v(" "),n("span",[t._v(t._s(e.level))])]),t._v(" "),n("div",{staticClass:"cmt-content"},[void 0!==e.parent?n("DetailCmt",{staticStyle:{padding:"10px",border:"1px dashed #ccc",background:"rgb(241, 222, 222)"},attrs:{data:e.parent},on:{handleJieShou:t.handleJieShou}}):t._e(),t._v(" "),n("div",{staticClass:"cmt-new"},[n("p",{staticClass:"cmt-message"},[t._v(t._s(e.content))]),t._v(" "),n("el-row",{attrs:{type:"flex"}},t._l(e.pics,function(t,c){return n("div",{directives:[{name:"show",rawName:"v-show",value:e.pics.length>0,expression:"item.pics.length>0"}],key:c,staticClass:"cmt-pic"},[n("img",{attrs:{src:"http://157.122.54.189:9095"+t.url}})])}),0),t._v(" "),n("div",{staticClass:"cmt-ctrl"},[n("a",{attrs:{href:"javascript:;"},on:{click:function(n){return t.handleDiGui(e)}}},[t._v("回复")])])],1)],1)])}),0),t._v(" "),n("el-row",{attrs:{type:"flex",justify:"center"}},[n("el-pagination",{attrs:{"current-page":t.pageIndex,"page-sizes":[2,4,8,10],"page-size":t.limit,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)],1),t._v(" "),n("el-row",{staticClass:"right"},[n("h4",[t._v("相关攻略")]),t._v(" "),t._l(t.tuiJianData,function(e,c){return n("div",{key:c,staticClass:"recommend-list",on:{click:function(n){return t.updateList(e)}}},[n("nuxt-link",{attrs:{to:"/post/detail?id="+e.id}},[n("el-row",{attrs:{type:"flex"}},[n("el-row",{staticClass:"post-img",attrs:{type:"flex",align:"middle"}},[n("img",{attrs:{src:e.images[0]}})]),t._v(" "),n("div",{staticClass:"post-text"},[n("div",[t._v(t._s(e.title))]),t._v(" "),n("span",[t._v(t._s(t.$moment(e.updated_at).format("YYYY-MM-DD"))+" 阅读"+t._s(e.watch))])])],1)],1)],1)})],2)],1)},[],!1,null,"51dec3b2",null));e.default=v.exports}}]);