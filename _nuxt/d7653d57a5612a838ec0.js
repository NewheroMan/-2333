(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{474:function(t,e,n){var content=n(561);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(23).default)("168f8460",content,!0,{sourceMap:!1})},560:function(t,e,n){"use strict";var r=n(474);n.n(r).a},561:function(t,e,n){(t.exports=n(22)(!1)).push([t.i,".container[data-v-4f60c5e4]{background:#f5f5f5;padding:30px 0}.container .main[data-v-4f60c5e4]{width:1000px;margin:0 auto}.container .main .pay-title[data-v-4f60c5e4]{text-align:right}.container .main .pay-title span[data-v-4f60c5e4]{font-size:28px;color:#ff4500}.container .main .pay-main[data-v-4f60c5e4]{background:#fff;margin-top:10px;border-top:5px solid orange;padding:30px}.container .main .pay-main h4[data-v-4f60c5e4]{font-size:28px;font-weight:400;margin-bottom:10px}.container .main .pay-main .pay-qrcode[data-v-4f60c5e4]{padding:0 80px}.container .main .pay-main .qrcode[data-v-4f60c5e4]{border:1px solid #ddd;padding:15px;height:-webkit-fit-content;height:-moz-fit-content;height:fit-content}.container .main .pay-main .qrcode #qrcode-stage[data-v-4f60c5e4]{width:200px;height:200px;margin-bottom:10px}.container .main .pay-main .qrcode p[data-v-4f60c5e4]{line-height:2;text-align:center}",""])},631:function(t,e,n){"use strict";n.r(e);n(17),n(83);var r,o=n(9),c=n(539),d=n.n(c),f={data:function(){return{payInfo:{},price:"",timer:null}},methods:{isPay:(r=Object(o.a)(regeneratorRuntime.mark(function t(data){var e,n,r,o=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.$route.query.id,n=this.$store.state,n.api,r=n.user.userInfo,t.abrupt("return",this.$axios({url:"airorders/checkpay",method:"POST",data:{id:e,nonce_str:data.nonce_str,out_trade_no:data.order_no},headers:{Authorization:"Bearer ".concat(r.token)}}).then(function(t){return"支付完成"===t.data.statusTxt?(o.$confirm("订单支付成功","提示",{confirmButtonText:"确定",showCancelButton:!1,type:"success"}),Promise.resolve(!0)):Promise.resolve(!1)}));case 3:case"end":return t.stop()}},t,this)})),function(t){return r.apply(this,arguments)})},mounted:function(){var t=this;setTimeout(function(){var e=t.$store.state.user.userInfo.token,n=t.$route.query.id;t.$axios({url:"/airorders/".concat(n),headers:{Authorization:"Bearer ".concat(e)}}).then(function(e){var n=e.data,r=n.payInfo,c=n.price;t.payInfo=r,t.price=c;var canvas=document.getElementById("qrcode-stage");d.a.toCanvas(canvas,"".concat(r.code_url)),t.timer=setInterval(Object(o.a)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.isPay(r);case 2:if(!e.sent){e.next=6;break}return clearInterval(t.timer),e.abrupt("return");case 6:case"end":return e.stop()}},e)})),3e3)})},200)},destroyed:function(){clearInterval(this.timer)}},l=(n(560),n(12)),component=Object(l.a)(f,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("div",{staticClass:"main"},[n("div",{staticClass:"pay-title"},[t._v("\n      支付总金额\n      "),n("span",{staticClass:"pay-price"},[t._v("￥ "+t._s(t.price))])]),t._v(" "),n("div",{staticClass:"pay-main"},[n("h4",[t._v("微信支付")]),t._v(" "),n("el-row",{staticClass:"pay-qrcode",attrs:{type:"flex",justify:"space-between",align:"middle"}},[n("div",{staticClass:"qrcode"},[n("canvas",{attrs:{id:"qrcode-stage"}}),t._v(" "),n("p",[t._v("请使用微信扫一扫")]),t._v(" "),n("p",[t._v("扫描二维码支付")])]),t._v(" "),n("div",{staticClass:"pay-example"},[n("img",{attrs:{src:"http://157.122.54.189:9093/images/wx-sweep2.jpg",alt:""}})])])],1)])])},[],!1,null,"4f60c5e4",null);e.default=component.exports}}]);