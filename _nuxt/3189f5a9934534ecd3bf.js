(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{469:function(t,e,n){var content=n(534);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(23).default)("6ec28f9d",content,!0,{sourceMap:!1})},470:function(t,e,n){var content=n(536);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(23).default)("672021e8",content,!0,{sourceMap:!1})},471:function(t,e,n){var content=n(538);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(23).default)("e1ef3e34",content,!0,{sourceMap:!1})},533:function(t,e,n){"use strict";var o=n(469);n.n(o).a},534:function(t,e,n){(t.exports=n(22)(!1)).push([t.i,".air-column[data-v-0b4aadb8]{border-bottom:1px dashed #ddd;padding-bottom:20px;margin-bottom:20px}.air-column h2[data-v-0b4aadb8]{margin-bottom:20px;font-size:22px;font-weight:400}[data-v-0b4aadb8] .el-select .el-input{width:130px}.input-with-select[data-v-0b4aadb8]{width:590px}.input-with-select[data-v-0b4aadb8] .el-input-group__prepend{background-color:#fff}.member-info[data-v-0b4aadb8] .el-form-item{margin-bottom:0}.member-info-item[data-v-0b4aadb8]{border-bottom:1px dashed #eee;padding-bottom:20px;position:relative}.member-info-item:first-child .delete-user[data-v-0b4aadb8]{display:none}.add-member[data-v-0b4aadb8]{margin-top:20px}.delete-user[data-v-0b4aadb8]{display:block;background:#ddd;width:16px;height:16px;font-size:14px;text-align:center;line-height:16px;color:#fff;cursor:pointer;border-radius:50px;position:absolute;right:-30px;top:50%}.insurance>div[data-v-0b4aadb8]{margin-top:10px}.insurance-item[data-v-0b4aadb8]{margin-bottom:20px}.contact[data-v-0b4aadb8] .el-input{width:50%}.submit[data-v-0b4aadb8]{margin:50px auto;display:block;width:250px;height:50px}",""])},535:function(t,e,n){"use strict";var o=n(470);n.n(o).a},536:function(t,e,n){(t.exports=n(22)(!1)).push([t.i,".aside[data-v-2e1a8dd8]{width:350px;height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;border:1px solid #ddd}.air-info[data-v-2e1a8dd8]{padding:15px}.air-info .info-top[data-v-2e1a8dd8]{margin-bottom:10px}.air-info .info-top>div[data-v-2e1a8dd8]:last-child{font-size:14px}.air-info .info-step .flight-airport strong[data-v-2e1a8dd8]{display:block;font-size:22px;font-weight:400}.air-info .info-step .flight-airport span[data-v-2e1a8dd8]{font-size:12px;color:#999}.air-info .info-step .flight-time[data-v-2e1a8dd8]{text-align:center;font-size:12px;color:#999}.air-info .info-step .flight-time span[data-v-2e1a8dd8]{display:block}.info-bar[data-v-2e1a8dd8]{border-top:1px dashed #ddd;padding:10px 15px;font-size:14px;color:#666}.info-bar .price[data-v-2e1a8dd8]{font-size:28px;color:orange}",""])},537:function(t,e,n){"use strict";var o=n(471);n.n(o).a},538:function(t,e,n){(t.exports=n(22)(!1)).push([t.i,".container[data-v-2d4fda2d]{width:1000px;margin:20px auto}.aside[data-v-2d4fda2d]{width:350px;height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;border:1px solid #ddd}",""])},628:function(t,e,n){"use strict";n.r(e);var o=n(126),r={data:function(){return{infoData:{insurances:[],seat_infos:{}},user:[{username:"",id:""}],insurances:[],contactName:"",contactPhone:"",captcha:"",invoice:!1}},mounted:function(){var t=this,e=this.$route.query;this.$axios({url:"/airs/".concat(e.id),params:{seat_xid:e.xid}}).then(function(e){t.infoData=e.data,t.$store.commit("air/setAsideData",t.infoData)})},methods:{AllPrice:function(){var t=0;t+=this.infoData.seat_infos.org_settle_price,t+=30*this.insurances.length,t+=this.infoData.airport_tax_audlet,t*=this.user.length,this.$store.commit("air/setAllPrice",t)},chooseInsurance:function(t){var e=this.insurances.indexOf(t.id);e>-1?this.insurances.splice(e,1):this.insurances.push(t.id),this.insurance=this.insurances},handleAddUsers:function(){this.user=[].concat(Object(o.a)(this.user),[{username:"",id:""}])},handleDeleteUser:function(t){this.user.splice(t,1)},handleSendCaptcha:function(){var t=this;this.$store.dispatch("air/sendCode",this.contactPhone).then(function(e){t.$confirm("验证码是:".concat(e),"验证码",{confirmButtonText:"确定",showCancelButton:!1,type:"success"})})},handleSubmit:function(){var t=this,e=this.$route.query,n=e.id,o=e.xid,form={users:this.user,insurances:this.insurance,contactName:this.contactName,contactPhone:this.contactPhone,captcha:this.captcha,invoice:!1,air:n/1,seat_xid:o},r=this.$store.state.user.userInfo.token;this.$axios({url:"/airorders",method:"POST",data:form,headers:{Authorization:"Bearer ".concat(r||"NO TOKEN")}}).then(function(e){t.$message({message:"正在生成订单！请稍等",type:"success"}),setTimeout(function(){var n=e.data,o=n.message,data=n.data;t.$message.success(o),t.$router.push("/air/pay?id="+data.id)},3e3)})}}},c=(n(533),n(12)),d=Object(c.a)(r,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"main"},[n("div",{staticClass:"air-column"},[n("h2",[t._v("乘机人")]),t._v(" "),n("el-form",{staticClass:"member-info"},t._l(t.user,function(e,o){return n("div",{key:o,staticClass:"member-info-item"},[n("el-form-item",{attrs:{label:"乘机人类型"}},[n("el-input",{staticClass:"input-with-select",attrs:{placeholder:"姓名"},model:{value:e.username,callback:function(n){t.$set(e,"username",n)},expression:"item.username"}},[n("el-select",{attrs:{slot:"prepend",value:"1",placeholder:"请选择"},slot:"prepend"},[n("el-option",{attrs:{label:"成人",value:"1"}})],1)],1)],1),t._v(" "),n("el-form-item",{attrs:{label:"证件类型"}},[n("el-input",{staticClass:"input-with-select",attrs:{placeholder:"证件号码"},model:{value:e.id,callback:function(n){t.$set(e,"id",n)},expression:"item.id"}},[n("el-select",{attrs:{slot:"prepend",value:"1",placeholder:"请选择"},slot:"prepend"},[n("el-option",{attrs:{label:"身份证",value:"1",checked:!0}})],1)],1)],1),t._v(" "),n("span",{staticClass:"delete-user",on:{click:function(e){return t.handleDeleteUser(o)}}},[t._v("-")])],1)}),0),t._v(" "),n("el-button",{staticClass:"add-member",attrs:{type:"primary"},on:{click:t.handleAddUsers}},[t._v("添加乘机人")])],1),t._v(" "),n("div",{staticClass:"air-column"},[n("h2",[t._v("保险")]),t._v(" "),t._l(t.infoData.insurances,function(e,o){return n("div",{key:o},[n("div",{staticClass:"insurance-item"},[n("el-checkbox",{attrs:{label:e.type+"：￥"+e.price+"/份×1  最高赔付"+e.compensation+"元",border:""},on:{change:function(n){return t.chooseInsurance(e)}}})],1)])})],2),t._v(" "),n("div",{staticClass:"air-column"},[n("h2",[t._v("联系人")]),t._v(" "),n("div",{staticClass:"contact"},[n("el-form",{attrs:{"label-width":"60px"}},[n("el-form-item",{attrs:{label:"姓名"}},[n("el-input",{model:{value:t.contactName,callback:function(e){t.contactName=e},expression:"contactName"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"手机"}},[n("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.contactPhone,callback:function(e){t.contactPhone=e},expression:"contactPhone"}},[n("template",{slot:"append"},[n("el-button",{on:{click:t.handleSendCaptcha}},[t._v("发送验证码")])],1)],2)],1),t._v(" "),n("el-form-item",{attrs:{label:"验证码"}},[n("el-input",{model:{value:t.captcha,callback:function(e){t.captcha=e},expression:"captcha"}})],1)],1),t._v(" "),n("el-button",{staticClass:"submit",attrs:{type:"warning"},on:{click:t.handleSubmit}},[t._v("提交订单")])],1)]),t._v(" "),n("input",{attrs:{type:"hidden"},domProps:{value:t.AllPrice()}})])},[],!1,null,"0b4aadb8",null).exports,l=(n(125),{props:{data:{type:Object,default:{seat_infos:{}}}},computed:{rankTime:function(){if(!this.data.dep_time)return"";var t=this.data.dep_time.split(":"),e=this.data.arr_time.split(":"),n=60*t[0]+ +t[1],o=60*e[0]+ +e[1],r=o-n;return r<0&&(r=o+1440-n),"".concat(Math.floor(r/60),"时").concat(r%60,"分")}}}),f=(n(535),{components:{OrderForm:d,OrderAside:Object(c.a)(l,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"aside"},[n("div",{staticClass:"air-info"},[n("el-row",{staticClass:"info-top",attrs:{type:"flex",justify:"space-between"}},[n("div",[t._v(t._s(t.data.dep_date))]),t._v(" "),n("div",[t._v(t._s(t.data.org_city_name)+" - "+t._s(t.data.dst_city_name))])]),t._v(" "),n("el-row",{staticClass:"info-step",attrs:{type:"flex",justify:"space-between",align:"middle"}},[n("el-col",{staticClass:"flight-airport",attrs:{span:5}},[n("strong",[t._v(t._s(t.data.dep_time))]),t._v(" "),n("span",[t._v(t._s(t.data.org_airport_name)+t._s(t.data.org_airport_quay))])]),t._v(" "),n("el-col",{staticClass:"flight-time",attrs:{span:14}},[n("span",[t._v("--- "+t._s(t.rankTime)+" ---")]),t._v(" "),n("span",[t._v(t._s(t.data.airline_name)+t._s(t.data.flight_no))])]),t._v(" "),n("el-col",{staticClass:"flight-airport",attrs:{span:5}},[n("strong",[t._v(t._s(t.data.arr_time))]),t._v(" "),n("span",[t._v("浦东机场T2")])])],1)],1),t._v(" "),n("el-row",{staticClass:"info-bar",attrs:{type:"flex",justify:"space-between"}},[n("span",[t._v("订单总价")]),t._v(" "),n("span",[t._v("金额")]),t._v(" "),n("span",[t._v("数量")])]),t._v(" "),n("el-row",{staticClass:"info-bar",attrs:{type:"flex",justify:"space-between"}},[n("span",[t._v("成人机票")]),t._v(" "),n("span",[t._v("￥"+t._s(t.data.seat_infos.org_settle_price))]),t._v(" "),n("span",[t._v("x1")])]),t._v(" "),n("el-row",{staticClass:"info-bar",attrs:{type:"flex",justify:"space-between"}},[n("span",[t._v("机建＋燃油")]),t._v(" "),n("span",[t._v("¥"+t._s(t.data.airport_tax_audlet)+"/人/单程")]),t._v(" "),n("span",[t._v("x1")])]),t._v(" "),n("el-row",{staticClass:"info-bar",attrs:{type:"flex",justify:"space-between",align:"middle"}},[n("span",[t._v("应付总额：")]),t._v(" "),n("span",{staticClass:"price"},[t._v("￥ "+t._s(t.$store.state.air.AllPrice))])])],1)},[],!1,null,"2e1a8dd8",null).exports},data:function(){return{infoData:{insurances:[],seat_infos:{}}}},updated:function(){}}),h=(n(537),Object(c.a)(f,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"container"},[e("el-row",{attrs:{type:"flex",justify:"space-between"}},[e("OrderForm"),this._v(" "),e("OrderAside",{attrs:{data:this.$store.state.air.infoData}})],1)],1)},[],!1,null,"2d4fda2d",null));e.default=h.exports}}]);